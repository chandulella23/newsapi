<!DOCTYPE html>
<html>
<head>
<title> Chandu News Room </title>
<style>
a:link {
    text-decoration: none;
}
#headlines {
    position: fixed;
    bottom: 0;
    right: 0;
  }
#channels {
    position: fixed;
    bottom: 0;
    left: 5;
  }
  
</style>
</head>
<body>
<h1 align="center">News Room</h1>


  	<input type="text" id="searchbox" placeholder="Search here..." required>
	  <button type="submit" onclick="search()">Search</button>


<div id=headlines>
<h1> Top Headlines </h1>
<p id="demo0"> </p>
<p id="demo1"> </p>
<p id="demo2"> </p>
<p id="demo3"> </p>
<p id="demo4"> </p>
<p id="demo5"> </p>
<p id="demo6"> </p>
<p id="demo7"> </p>
<p id="demo8"> </p>
<p id="demo9"> </p>
</div>

<div id=channels>
	<h1> Channels </h1>
	<input type="checkbox" id="news0" value="abc-news"> ABC News<br>
    <input type="checkbox" id="news1" value="bbc-news" > BBC News<br>
	<input type="checkbox" id="news2" value="bbc-sport"> BBC Sport<br>
    <input type="checkbox" id="news3" value="espn" > ESPN<br>
	<input type="checkbox" id="news4" value="business-insider"> Business Insider<br>
    <input type="checkbox" id="news5" value="buzzfeed" > Buzzfeed<br>
	<input type="checkbox" id="news6" value="cnbc"> CNBC<br>
    <input type="checkbox" id="news7" value="cnn" > CNN<br>
</div><script>

function foo(){
fetch('https://newsapi.org/v2/top-headlines?sources=google-news&apiKey=2b2b21604b474729869dca8930baf376').
then((res)=>{
	return res.json()
})
// we returned res object into json object

.then((data)=>{
	let total = data.totalResults;
	console.log(total);
	
//by using for loop we can iterate through all the <p> tags	

	for(let i=0;i<total;i++){
	let title=JSON.stringify(data.articles[i].title);
//here we are passing some html code at particular ids	
	document.getElementById("demo"+i).innerHTML=`<a href="https://www.nytimes.com/2018/01/26/business/steve-wynn-sexual-misconduct-claims.html">
	<ul>
    <li>${title}</li>
    </ul>  
	</a>`;
 } 
 
})
}
foo();


function search()
{
let news=[];
var keyword=document.getElementById("searchbox").value ;
for(var i=0;i<8;i++)
{
if (document.getElementById("news"+i).checked) 
{
answr=document.getElementById("news"+i).value;
news.push(answr);
}
}
console.log(news);

if(news.length!=0)
{
fetch(`https://newsapi.org/v2/everything?q=${keyword}&sources=${news}&apiKey=2b2b21604b474729869dca8930baf376`)
.then((res)=>{
return res.json()
}) 

.then((data)=>{ 
console.log(data.totalResults);
for(let i=0;i<data.articles.length;i++){
document.write(data.articles[i].author);
				}
			
			
});
}

else{
alert("Its mandatory to check one of the channels");
}

}

</script>
</body>
</html>